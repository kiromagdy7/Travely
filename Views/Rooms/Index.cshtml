@model IEnumerable<Travely.Models.TblRoom>

@{
    ViewData["Title"] = "Rooms";
}

<main style="min-height:82vh;">

<p><a asp-action="Create" class="ColorBtn mt-5">Create New Room</a></p>

<table class="table">
    <thead>
        <tr>
            <th>@Html.DisplayNameFor(model => model.RoomNumber)</th>
            <th>@Html.DisplayNameFor(model => model.RoomType)</th>
            <th>@Html.DisplayNameFor(model => model.BedsCount)</th>
            <th>@Html.DisplayNameFor(model => model.Price)</th>
            <th>@Html.DisplayNameFor(model => model.Available)</th>
            <th>@Html.DisplayNameFor(model => model.MaxGuests)</th>
            <th>@Html.DisplayNameFor(model => model.Hotel)</th>
            <th>@Html.DisplayNameFor(model => model.BreakfastIncluded)</th>
            <th>@Html.DisplayNameFor(model => model.PetsAllowed)</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model)
        {
            <tr>
                <td>@Html.DisplayFor(modelItem => item.RoomNumber)</td>
                <td>@Html.DisplayFor(modelItem => item.RoomType)</td>
                <td>@Html.DisplayFor(modelItem => item.BedsCount)</td>
                <td>@Html.DisplayFor(modelItem => item.Price)</td>
                <td>
                    <span class="badge @(item.Available ? "bg-success" : "bg-danger")">
                        @(item.Available ? "Available" : "Occupied")
                    </span>
                </td>
                <td>@Html.DisplayFor(modelItem => item.MaxGuests)</td>
                <td>@Html.DisplayFor(modelItem => item.Hotel.Name)</td>
                <td>
                    <span class="badge @(item.BreakfastIncluded ? "bg-success" : "bg-secondary")">
                        @(item.BreakfastIncluded ? "Included" : "Not Included")
                    </span>
                </td>
                <td>
                    <span class="badge @(item.PetsAllowed ? "bg-success" : "bg-secondary")">
                        @(item.PetsAllowed ? "Allowed" : "Not Allowed")
                    </span>
                </td>
                <td>
                    <div class="action-buttons">
                        <a asp-action="Edit" asp-route-id="@item.RoomId" class="action-btn edit-btn" title="Edit">
                            <i class="bi bi-pencil"></i>
                        </a>
                        <a asp-action="Details" asp-route-id="@item.RoomId" class="action-btn details-btn" title="Details">
                            <i class="bi bi-info-circle"></i>
                        </a>
                        <a asp-action="Delete" asp-route-id="@item.RoomId" class="action-btn delete-btn" title="Delete">
                            <i class="bi bi-trash"></i>
                        </a>
                        <a asp-action="UpdateAvailability" asp-route-id="@item.RoomId"
                           asp-route-isAvailable="@(!item.Available)"
                           class="action-btn @(item.Available ? "occupy-btn" : "available-btn")"
                           title="@(item.Available ? "Mark Occupied" : "Mark Available")">
                            <i class="bi @(item.Available ? "bi-toggle-on" : "bi-toggle-off")"></i>
                        </a>
                    </div>
                </td>
            </tr>
        }
    </tbody>
</table>

</main>

<style>
.action-buttons {
    display: flex;
    gap: 5px;
    justify-content: flex-start;
    align-items: center;
}

.action-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 28px;
    height: 28px;
    border-radius: 4px;
    border: none;
    color: white;
    transition: all 0.2s ease;
    text-decoration: none;
}

.action-btn:hover {
    transform: translateY(-1px);
    color: white;
}

.edit-btn {
    background-color: #0d6efd;
}

.edit-btn:hover {
    background-color: #0b5ed7;
}

.details-btn {
    background-color: #0dcaf0;
}

.details-btn:hover {
    background-color: #0bb5d7;
}

.delete-btn {
    background-color: #dc3545;
}

.delete-btn:hover {
    background-color: #bb2d3b;
}

.occupy-btn {
    background-color: #ffc107;
}

.occupy-btn:hover {
    background-color: #e0a800;
}

.available-btn {
    background-color: #198754;
}

.available-btn:hover {
    background-color: #157347;
}

.bi {
    font-size: 14px;
}
</style>
